plugins {
    id 'java-library'
    id 'signing'
    id 'maven-publish'
	id 'org.springframework.boot' version '3.0.2' apply false
	id 'io.spring.dependency-management' version '1.1.0'

    // Linting
    id 'checkstyle'
    id 'pmd'
    id 'com.github.spotbugs' version '5.0.13'
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}

repositories {
	mavenCentral()
}

subprojects {
    apply plugin: 'io.spring.dependency-management'
    apply plugin: 'groovy'
    apply plugin: 'jacoco'
    //apply plugin: 'checkstyle'
    //apply plugin: 'pmd'
    //apply plugin: 'com.github.spotbugs'

    sourceCompatibility = 17
    targetCompatibility = 17
    compileJava.options.encoding = 'UTF-8'
    compileTestJava.options.encoding = 'UTF-8'

    repositories {
        mavenCentral()
    }

    dependencies {
        // Commons Lang
        implementation("org.apache.commons:commons-lang3:3.12.0")

        // Spock
        testImplementation(platform("org.spockframework:spock-bom:2.3-groovy-4.0"))
        testImplementation("org.apache.groovy:groovy:4.0.7")
        testImplementation("org.spockframework:spock-core")
        testImplementation("org.spockframework:spock-spring")
        testRuntimeOnly("net.bytebuddy:byte-buddy:1.12.22")

        // Lombok
        compileOnly("org.projectlombok:lombok:1.18.24")
        testImplementation("org.projectlombok:lombok:1.18.24")
        annotationProcessor("org.projectlombok:lombok:1.18.20")
    }
}
